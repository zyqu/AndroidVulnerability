// Decompiled by Jad v1.5.8e. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.geocities.com/kpdus/jad.html
// Decompiler options: packimports(3) 

package aib.ibank.android;

import android.app.*;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.net.*;
import android.os.Bundle;
import android.os.Process;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.*;
import android.webkit.*;
import org.apache.cordova.CordovaWebViewClient;
import org.apache.cordova.DroidGap;

// Referenced classes of package aib.ibank.android:
//            CustomProgressDialog

public class AIBMobileBanking extends DroidGap
{

    public AIBMobileBanking()
    {
        firstLoad = true;
        splashInitialised = false;
    }

    public void onCreate(Bundle bundle)
    {
        super.onCreate(bundle);
        super.setIntegerProperty("loadUrlTimeoutValue", 60000);
        setRequestedOrientation(1);
        getWindow().clearFlags(2048);
        getWindow().setFlags(1024, 1024);
        getWindow().setFeatureInt(2, -1);
        super.setIntegerProperty("splashscreen", 0x7f020004);
        super.loadUrl("http://m.aib.ie/mobile/mobile-banking/home-android?search=aibandroidapp");
    }

    public boolean onCreateOptionsMenu(Menu menu)
    {
        getMenuInflater().inflate(0x7f030001, menu);
        return true;
    }

    public boolean onKeyDown(int i, KeyEvent keyevent)
    {
        boolean flag;
        if(i == 4)
        {
            moveTaskToBack(true);
            flag = true;
        } else
        {
            flag = super.onKeyDown(i, keyevent);
        }
        return flag;
    }

    public boolean onOptionsItemSelected(MenuItem menuitem)
    {
        if(!menuitem.getTitle().toString().equalsIgnoreCase("exit")) goto _L2; else goto _L1
_L1:
        System.runFinalizersOnExit(true);
        Process.killProcess(Process.myPid());
_L4:
        return true;
_L2:
        if(menuitem.getTitle().toString().equalsIgnoreCase("about"))
        {
            android.app.AlertDialog.Builder builder = new android.app.AlertDialog.Builder(this);
            builder.setMessage("AIB Mobile Banking\nVersion 1.0").setCancelable(false).setPositiveButton("Ok", new android.content.DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialoginterface, int i)
                {
                }

                final AIBMobileBanking this$0;

            
            {
                this$0 = AIBMobileBanking.this;
                super();
            }
            });
            builder.create().show();
        }
        if(true) goto _L4; else goto _L3
_L3:
    }

    protected void setWebViewClient(WebView webview, WebViewClient webviewclient)
    {
        webview.getSettings().setUserAgentString((new StringBuilder(String.valueOf(webview.getSettings().getUserAgentString()))).append(" AIBAndroidApp1.1").toString());
        webViewClient = new CordovaWebViewClient(this, webview) {

            public void onLoadResource(WebView webview1, String s)
            {
                if(cm.getActiveNetworkInfo() == null || !cm.getActiveNetworkInfo().isAvailable() || !cm.getActiveNetworkInfo().isConnected())
                    s = "file://android_asset/www/error.html";
                if(firstLoad) goto _L2; else goto _L1
_L1:
                String s1 = myAppView.getOriginalUrl();
                if(s1 != null && (!s1.contains("c=Mobi_P&pagename=AIB_MOBI/Map/m-aib-branch-locator-search") || s.contains("c=Mobi_P&pagename=AIB_MOBI/Map/m-aib-branch-locator-search")) && (!s1.contains("c=Mobi_P&pagename=AIB_MOBI/Map/m-aib-branch-locator-displaymap") || s.contains("c=Mobi_P&pagename=AIB_MOBI/Map/m-aib-branch-locator-displaymap")))
                {
                    loadingDialog.show();
                    loadingDialog.setCancelable(false);
                }
_L4:
                super.onLoadResource(webview1, s);
                return;
_L2:
                if(!splashInitialised)
                {
                    android.view.WindowManager.LayoutParams layoutparams = splashDialog.getWindow().getAttributes();
                    DisplayMetrics displaymetrics = new DisplayMetrics();
                    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
                    layoutparams.x = 0;
                    layoutparams.y = displaymetrics.heightPixels / 2 - displaymetrics.heightPixels / 6;
                    splashDialog.getWindow().setAttributes(layoutparams);
                    setRequestedOrientation(getResources().getConfiguration().orientation);
                    splashInitialised = true;
                }
                if(true) goto _L4; else goto _L3
_L3:
            }

            public void onPageFinished(WebView webview1, String s)
            {
                if(firstLoad)
                {
                    firstLoad = false;
                    loadingDialog.setMessage(" Please Wait...   ");
                    splashDialog.dismiss();
                } else
                {
                    loadingDialog.hide();
                }
                setRequestedOrientation(4);
                super.onPageFinished(webview1, s);
            }

            public void onReceivedError(WebView webview1, int i, String s, String s1)
            {
                Log.e("error", s);
                myAppView.loadUrl("file:///android_asset/www/error.html");
            }

            public boolean shouldOverrideUrlLoading(WebView webview1, String s)
            {
                boolean flag;
                if(s.contains("mobilebanking.aib.ie") || s.contains("search=aibandroidapp"))
                {
                    flag = false;
                } else
                {
                    Intent intent = new Intent("android.intent.action.VIEW", Uri.parse(s));
                    startActivity(intent);
                    flag = true;
                }
                return flag;
            }

            ConnectivityManager cm;
            ProgressDialog loadingDialog;
            CustomProgressDialog splashDialog;
            final AIBMobileBanking this$0;
            private final WebView val$myAppView;

            
            {
                this$0 = AIBMobileBanking.this;
                myAppView = webview;
                super(final_droidgap);
                loadingDialog = new ProgressDialog(activity);
                splashDialog = CustomProgressDialog.show(AIBMobileBanking.this, "", "", true);
                cm = (ConnectivityManager)getSystemService("connectivity");
            }
        };
        webview.setWebViewClient(webViewClient);
    }

    private static final String androidCheckParam = "search=aibandroidapp";
    private static final String branchLocatorUrl1 = "c=Mobi_P&pagename=AIB_MOBI/Map/m-aib-branch-locator-search";
    private static final String branchLocatorUrl2 = "c=Mobi_P&pagename=AIB_MOBI/Map/m-aib-branch-locator-displaymap";
    private static final String internetBankingDomain = "mobilebanking.aib.ie";
    private boolean firstLoad;
    private boolean splashInitialised;




}
